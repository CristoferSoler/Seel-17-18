#G 4.59 Non-availability with VoIP by NAT
Its IP address can be used to clearly address a computer on the Internet. In the currently used Internet Protocol version 4 (IPv4), the IP address consists of four numbers between 0 and 255, for example 194.95.176.226. In the newer version 6 (IPv6) Internet Protocol, an IP address consists of eight four-digit hexadecimal numbers, such as FEDC: BA98: 7654: 3210: FEDC: BA98: 7654: 3210. A major disadvantage of version 4 over version 6, which has not yet been enforced, is the low number of public IP addresses available. Very few institutions receive enough IP addresses to assign each workstation its own static IP address. Network Address Translation (NAT) can resolve this issue. Only the system between the public and the private network requires one or a few public IP addresses. The actual workstations receive internal IP addresses, whereby an internal network component (usually a NAT gateway) converts the internal IP address into an external IP address when forwarding a packet.

For the media stream required for the transmission of the voice information, a new UDP or TCP connection must be established. The required IP addresses and port numbers are transmitted in the signaling messages  . NAT modifies the source IP address in the IP header and the source port number in the UDP or TCP headers of the media stream. The information about the source IP address and the port number in the message part of the signaling message remain unchanged.

As a result, no media streams can be sent to the VoIP phone behind a NAT gateway. VoIP devices that are on the Internet can not send media to a VoIP phone behind a NAT gateway because the private IP address is not being routed on the Internet. Voice communication is thus not possible for VoIP devices that are behind a NAT gateway because a safety-critical configuration is to be achieved, although no errors occurred during the signaling.

Exceptions are protocols such as IAX (InterAsterisk eXchange) or Skype. These protocols involve both signaling and media transport over an existing compound. Since no additional connections to the computers in the private network have to be established, the described problems with NAT do not occur when using these protocols. But since this also no control at the network transition takes place, thereby other security problems may arise.

In order to enable VoIP communication over a NAT gateway, the media flow of the NAT gateway to the VoIP devices can be forwarded statically. This approach is often found when connecting private customers to SIP providers. However, this can lead to problems. Here, the transmitter, which is located outside the LAN, establishes a connection to the NAT gateway via a reserved port number. The NAT gateway forwards this to a terminal that is assigned to the port number. This assumes that the call participants know the reserved port numbers. More serious is the disadvantage that the forwarded ports of the VoIP systems behind the NAT gateway can be accessed from the public data network.

Status: as of 2006



