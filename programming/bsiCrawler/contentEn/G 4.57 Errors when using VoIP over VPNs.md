#G 4.57 Errors when using VoIP over VPNs
For a telephone call via VoIP both the signaling information and the actual media stream are sent over a data network. There are safeguards for transporting this data at the protocol level, but these are not supported by all manufacturers and devices. The procedure for protecting the actual voice communication is usually negotiated by the terminals. For example, the Secure Realtime Transport Protocol (SRTP) can be used for this purpose.

If not all devices encrypt encrypted protocols and calls are transmitted over insecure networks, Virtual Private Networks (VPNs) can provide this protection. VPNs are used in practice for the integration of individual employees or for the integration of entire networks via a public network. When using VPNs, selected or all packets are encrypted by a VPN gateway and, depending on the routing table, transmitted to a remote VPN gateway. This decrypts the package and transmits it to the recipient. This also ensures that the sender and receiver are in the same subnet, although they may be several hundred kilometers apart.

Through the use of a VPN both the signaling and media stream of VoIP as well as all other information, such as e-mails, can be protected. Some hardphones support VPNs directly. If an encrypted media transport protocol, such as SRTP, is used, it is sufficient if only the signaling stream through the VPN is protected.

The use of VPNs in conjunction with VoIP, however, often leads to problems.

In networks that transmit other information as well as VoIP data, routers and switches often prefer to forward VoIP messages. This procedure is intended to prevent quality problems such as dropouts or jitter. Although a separate field is provided in the IP header for IPv4 (Type of Service), it is often not used in practice. Instead, the routers prioritize the packets based on their content. However, this is no longer possible if the content is encrypted. As a result, the transmission of VoIP over VPNs can increasingly lead to transmission quality disruptions if the network is underutilized.

The use of Hiding NAT (Network Address Translation or Masquerading) can also cause problems. In contrast to static NAT, not every internal IP address is assigned exactly one public IP address, but several internal addresses can use a public IP address in parallel. For this procedure, not only the internal IP addresses, but also the port numbers in the IP packet must be changed by the NAT gateway. These changes cause the checksum generated by the VPN gateway to no longer match the new one. Encrypting the entire IP payload can also cause problems.

Packets that are used to transmit VoIP content are usually very small. If the transmission was to wait until a certain number of bytes had accumulated, this could result in too much delay in the transmission. Thus, the actual payload of IP packets is usually between 10 and 40 bytes in size. If the IP packets are to be protected by a VPN, an additional VPN header is added. For low-volume IP packets, the added VPN information represents a significant overhead. As a result, activating the VPN backup results in a significant increase in VoIP traffic. This can overload the LAN or WAN.

The encryption and decryption of the transmitted information also requires resources. If the system that performs the encryption or decryption is weakly dimensioned, a delay in the transmission may also occur at this point. Such an increase in latency can lead to dropouts or other quality issues.

Many encryption architectures for VPN use X.509 certificates or pre-shared secrets. Particularly for the certificate-based solution, many manufacturers currently rely on proprietary approaches that are incompatible with each other. If VoIP connections to external partners are to be established, they can therefore be phoned or not encrypted with these.

Status: as of 2006



