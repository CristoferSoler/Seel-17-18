#M 4.385 Configuration of the database used by OpenLDAP
Responsible for initiation: IT security officer, IT manager

Responsible for implementation: Administrator

In OpenLDAP, the configuration directives can be used to make settings for the database management system (DBMS) actually used. The settings are only possible for the BerkeleyDB via the backends back-bdb or back-hdb. They have no immediate impact on the functionality and operation of OpenLDAP, but have a major impact on directory service performance. In the following, only safety-relevant settings and frequent sources of error are listed. If necessary, a database specialist should be consulted for additional settings. For example, the settings for caching and transaction logs give rise to speed advantages at the expense of optimal integrity, which must be carefully weighed on a case-by-case basis.

* dbDirectory or olcDbDirectory The directive defines the location of database files in the IT system where the slapd server is running. The user ID in the context of which OpenLDAP is executed must have write access to the specified directory.
* dbConfig or olcDbConfigThe settings made in this directive are database-specific and are entered in the file DB_CONFIG of the DBMS. If such a file does not yet exist, it is created by using this directive. It should be noted that subsequent changes in the target file itself, for example with a text editor, override the settings selected here. Therefore, it must be determined how and by whom at which point settings are made. Changes to the directive always force a restart of the DBMS, but not the slapd server. Depending on the size and settings of the database, this may take some time while the directory service is unavailable. Changes to the database configuration should therefore be planned carefully and as far as possible in maintenance windows. B. at night or at the weekend to be implemented.
* dbIndex or olcDbIndex This directive can be used to set attributes of directory service objects for which an index is to be created. Without an index, all objects must be called and checked in a search. To improve availability, therefore, frequent searches should be supported by an index. Missing but desirable indexes can be recognized from the OpenLDAP protocols (see M 4.407 Logging when using OpenLDAP). If there is often a hint that access to a certain attribute index failed, an appropriate index should be set up. The indexes specified in the directive are automatically generated by the slapd server. If the slapd server is stopped during the indexing process, the indexing will not continue automatically. In this case, it must be performed manually with the slapindex tool.
* dbMode or olcDbMode This directive sets the user rights that apply to newly created database files. The default setting 0600 or -rw ------- grants only the user ID access, in the context of which the slapd server is operated. This default setting makes sense and should not be changed.




